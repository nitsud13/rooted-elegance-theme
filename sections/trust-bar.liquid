{% comment %}
  Trust Bar Section
  Horizontal bar with trust icons and messaging to build customer confidence.
  Features: 1-Year Guarantee, Expert Support, Secure Checkout, Trees Planted
{% endcomment %}

<section
  class="trust-bar section section--compact"
  id="trust-bar-{{ section.id }}"
  aria-label="Why shop with us"
>
  <div class="container">
    <div class="trust-bar__wrapper">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'trust_item' -%}
            <div
              class="trust-bar__item"
              style="--delay: {{ forloop.index | times: 100 }}ms"
              {{ block.shopify_attributes }}
            >
              <div class="trust-bar__icon">
                {%- case block.settings.icon -%}
                  {%- when 'guarantee' -%}
                    <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M24 4L6 12v12c0 11 18 18 18 18s18-7 18-18V12L24 4z"/>
                      <path d="M16 24l6 6 12-12" stroke-width="3"/>
                    </svg>

                  {%- when 'support' -%}
                    <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="24" cy="24" r="18"/>
                      <circle cx="24" cy="24" r="8"/>
                      <path d="M24 6v4M24 38v4M6 24h4M38 24h4"/>
                      <circle cx="24" cy="24" r="2" fill="currentColor"/>
                    </svg>

                  {%- when 'secure' -%}
                    <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <rect x="10" y="20" width="28" height="22" rx="4"/>
                      <path d="M16 20V14a8 8 0 1 1 16 0v6"/>
                      <circle cx="24" cy="32" r="3" fill="currentColor"/>
                      <path d="M24 35v4"/>
                    </svg>

                  {%- when 'trees' -%}
                    <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M24 6l-12 16h8l-6 12h20l-6-12h8L24 6z"/>
                      <path d="M24 34v10"/>
                      <path d="M18 44h12"/>
                    </svg>

                  {%- when 'shipping' -%}
                    <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M4 28h28V12H4v16z"/>
                      <path d="M32 36h8a2 2 0 0 0 2-2v-8l-6-8h-4"/>
                      <circle cx="12" cy="36" r="4"/>
                      <circle cx="36" cy="36" r="4"/>
                      <path d="M16 36h12"/>
                    </svg>

                  {%- when 'quality' -%}
                    <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <polygon points="24,4 29,18 44,18 32,28 36,44 24,34 12,44 16,28 4,18 19,18"/>
                    </svg>

                  {%- else -%}
                    <svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="24" cy="24" r="18"/>
                      <path d="M16 24l6 6 10-10"/>
                    </svg>
                {%- endcase -%}
              </div>

              <div class="trust-bar__content">
                <h3 class="trust-bar__title">{{ block.settings.title }}</h3>
                {%- if block.settings.description != blank -%}
                  <p class="trust-bar__description">{{ block.settings.description }}</p>
                {%- endif -%}
              </div>
            </div>
        {%- endcase -%}
      {%- endfor -%}
    </div>
  </div>
</section>

<style>
  .trust-bar {
    background: linear-gradient(135deg, var(--color-forest) 0%, var(--color-forest-dark) 100%);
    color: var(--color-white);
    overflow: hidden;
  }

  .trust-bar__wrapper {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-6);
  }

  @media (min-width: 768px) {
    .trust-bar__wrapper {
      grid-template-columns: repeat(4, 1fr);
      gap: var(--space-8);
    }
  }

  .trust-bar__item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: var(--space-3);
    padding: var(--space-4);
    border-radius: var(--radius-lg);
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(8px);
    transition: all var(--duration-normal) var(--ease-out);
    animation: fadeInUp var(--duration-slow) var(--ease-out) both;
    animation-delay: var(--delay, 0ms);
  }

  .trust-bar__item:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-4px);
  }

  .trust-bar__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, rgba(139, 168, 136, 0.3), rgba(139, 168, 136, 0.1));
    border: 2px solid rgba(139, 168, 136, 0.4);
    border-radius: var(--radius-full);
    transition: all var(--duration-normal) var(--ease-out);
  }

  .trust-bar__item:hover .trust-bar__icon {
    background: linear-gradient(135deg, rgba(139, 168, 136, 0.5), rgba(139, 168, 136, 0.2));
    border-color: var(--color-sage-light);
    transform: scale(1.1);
  }

  .trust-bar__icon svg {
    width: 32px;
    height: 32px;
    color: var(--color-sage-light);
    transition: color var(--duration-fast);
  }

  .trust-bar__item:hover .trust-bar__icon svg {
    color: var(--color-white);
  }

  .trust-bar__content {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
  }

  .trust-bar__title {
    font-family: var(--font-heading);
    font-size: var(--text-base);
    font-weight: var(--weight-semibold);
    color: var(--color-white);
    margin: 0;
    line-height: var(--leading-snug);
  }

  .trust-bar__description {
    font-size: var(--text-sm);
    color: rgba(255, 255, 255, 0.7);
    margin: 0;
    line-height: var(--leading-relaxed);
  }

  /* Alternative horizontal layout for desktop */
  @media (min-width: 1024px) {
    .trust-bar__item {
      flex-direction: row;
      text-align: left;
      gap: var(--space-4);
      padding: var(--space-5) var(--space-6);
    }

    .trust-bar__icon {
      flex-shrink: 0;
    }

    .trust-bar__title {
      font-size: var(--text-lg);
    }
  }

  /* Decorative elements */
  .trust-bar::before,
  .trust-bar::after {
    content: '';
    position: absolute;
    border-radius: 50%;
    opacity: 0.05;
    pointer-events: none;
  }

  .trust-bar::before {
    width: 300px;
    height: 300px;
    background: var(--color-sage-light);
    top: -150px;
    left: -100px;
  }

  .trust-bar::after {
    width: 200px;
    height: 200px;
    background: var(--color-earth);
    bottom: -100px;
    right: -50px;
  }

  /* Mobile adjustments */
  @media (max-width: 767px) {
    .trust-bar__icon {
      width: 56px;
      height: 56px;
    }

    .trust-bar__icon svg {
      width: 28px;
      height: 28px;
    }

    .trust-bar__title {
      font-size: var(--text-sm);
    }

    .trust-bar__description {
      font-size: var(--text-xs);
    }
  }

  /* Counter badge variant for "trees planted" */
  .trust-bar__item[data-type="counter"] .trust-bar__icon {
    position: relative;
  }

  .trust-bar__counter {
    position: absolute;
    top: -8px;
    right: -8px;
    min-width: 24px;
    height: 24px;
    padding: 0 var(--space-2);
    background: var(--color-earth);
    color: var(--color-white);
    font-size: 10px;
    font-weight: var(--weight-bold);
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
  }
</style>

{% schema %}
{
  "name": "Trust Bar",
  "tag": "section",
  "class": "section-trust-bar",
  "settings": [
    {
      "type": "select",
      "id": "layout",
      "label": "Layout style",
      "options": [
        { "value": "grid", "label": "Grid" },
        { "value": "inline", "label": "Inline" }
      ],
      "default": "grid"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#1B4D3E"
    }
  ],
  "blocks": [
    {
      "type": "trust_item",
      "name": "Trust Item",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "Icon",
          "options": [
            { "value": "guarantee", "label": "Guarantee Shield" },
            { "value": "support", "label": "Expert Support" },
            { "value": "secure", "label": "Secure Lock" },
            { "value": "trees", "label": "Trees" },
            { "value": "shipping", "label": "Shipping Truck" },
            { "value": "quality", "label": "Quality Star" }
          ],
          "default": "guarantee"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Trust Feature"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Description",
          "default": "Brief description here"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Trust Bar",
      "category": "Trust",
      "blocks": [
        {
          "type": "trust_item",
          "settings": {
            "icon": "guarantee",
            "title": "1-Year Guarantee",
            "description": "Every plant guaranteed to thrive"
          }
        },
        {
          "type": "trust_item",
          "settings": {
            "icon": "support",
            "title": "Expert Support",
            "description": "Real horticulturists, real advice"
          }
        },
        {
          "type": "trust_item",
          "settings": {
            "icon": "secure",
            "title": "Secure Checkout",
            "description": "SSL encrypted payments"
          }
        },
        {
          "type": "trust_item",
          "settings": {
            "icon": "trees",
            "title": "50K+ Trees Planted",
            "description": "One tree planted per order"
          }
        }
      ]
    }
  ]
}
{% endschema %}
